syntax = "proto3";

option go_package = "./proto";

package proto;

service TaskOrderService {
    rpc getOrdersForUser(UserOrders) returns (stream Task);
    rpc getAllTasks(None) returns (stream Task);
    rpc getTask(OrderTask) returns (Price);
    rpc buyTaskAnswer(UserBuyAnswer) returns (None);
    rpc createNewTask(Task) returns (Status);
    rpc updatePriceOfTask(TaskForUpdate) returns (Status);
}

message None {}

message UserBuyAnswer {
    string username = 1;
    int64 id = 2;
}

message Price {
    int64 price = 1;
    int64 answer = 2;
}

message Status {
    bool success = 1;
    string error = 2;
}

message TaskForUpdate {
    int64 id = 1;
    int64 price = 2;
}

message OrderTask {
    int64 id = 1;
}

message Task {
    int64 id = 1;
    int64 count = 2;
    repeated int64 heiaghts = 3;
    int64 price = 4;
}

message UserOrders {
    string username = 1;
    int64 page = 2;
}